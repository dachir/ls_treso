<style >
    .border {
        border: 1px solid #dee2e6;
    }
    .border-left {
        border-left: 1px solid #dee2e6;
        margin-left: -1px;
    }
    .border-right {
        border-right: 1px solid #dee2e6;
    }
    .align-middle {
        vertical-align: middle;
    }
    .h-100 {
        height: 100%;
    }
    .minh-30 {
        height: 30px;
    }
    .minh-30 {
        min-height: 30px;
    }
    .mh-100 {
        max-height: 100%;
    }
    .d-inline-block {
        display: inline-block;
    }
    .row-no-margin {
    margin-top:-1px;
    margin-right: -1px;
    margin-left: -1px;
    /*height: 25px;*/
    }
    .parent {
    display: flex;
    align-items: stretch;
    }
    .child {
    flex: 1;
    }
    .bgcolor {
        background-color: beige;
    }
    .right_align {
    text-align: right;
    /*border: 1px solid green;*/
    }
    .nopadding {
    padding: 0 !important;
    margin: 0 !important;
    }
    .separator {
    background-color: beige; /* Gray color */
    height: 10px; /* Adjust the height of the separator as needed */
    }

    [document-status]{
            margin-bottom: 0mm;
            visibility: hidden;
            height:0;
    }
    .mid_center_align {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .rigth_top_align {
        height: 100%;
        display: flex;
        /*align-items: center;*/
        justify-content: right;
    }
    .right_center_align {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: right;
    }
    .left_center_align {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: left;
    }
    .padding_left_right {
        padding-left: 5px;
        padding-right: 5px;
    }
    .margin_left_right {
        margin-left: 5px;
        margin-right: 5px;
    }
    .page_break_after {
        page-break-after: always;
    }
    .page_break_before {
        page-break-before: always;
    }
    .title_1 {
        font-size: 1.2rem; 
    }
    .title_2 {
        font-size: 1rem; 
    }
    .title_3 {
        font-size: 0.8rem; 
    }

    .font_bold {
        font-weight: bold;
    }

    .bg_green {
        background-color: #E9F6DE;
    }
    .bg_gray {
        background-color: #F4F5F6;
    }
    .signature {
        position:fixed !important;
        bottom: 0 !important;
        padding: 5px;
        width: 100%;
    }
    .overflow{
        word-wrap: break-word;
        height: auto
    }

</style>

<div class="row-no-margin border parent">
    <div class="col-sm-12 nopadding h-100 d-inline-block d-flex align-items-center justify-content-center">
        <div class="title_1 font_bold text-center">LIVRE DE CAISSE</div>
        <div class="title_2 font_bold text-center">Journal</div>
        <div class="title_3 font_bold text-center">Caisse  {{ filters.designation }}     </div>
        <div class="title_3 font_bold text-center">Du  {{ frappe.datetime.str_to_user(filters.date_debut) }}  au   {{ frappe.datetime.str_to_user(filters.date_fin) }}  </div>
    </div>
</div>
<br/>
{% for(var i=0, l=data.length; i<l; i++) { %}
    {% if(data[i].line == 'i') { %}
        <div class="row-no-margin border parent align-items-center bg_green {% if (data[i].line == 'i'&& i > 0) { %} page_break_before{% } %}">
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Date</b></small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>N° Pièce</b></small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Bénéficiaire</b></small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Référence</b></small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Désignation</b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Recettes</b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Dépenses</b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle border-left">
                <small class="mid_center_align"><b>Solde</b></small>
            </div>
        </div>
    {% } %}
    <div class="row-no-margin border parent align-items-center {% if (data[i].line == 'f') { %}bg_gray {% } %} {% if (data[i].line == 'i'&& i > 0) { %}bg_gray {% } %}">
        {% if(data[i].line == 'i') { %}
            <div class="col-sm-3 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="left_center_align margin_left_right"><b>Caisse  {{ filters.designation }}</b></small>
            </div>
            <div class="col-sm-6 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="mid_center_align margin_left_right"><b>Report solde au {%= frappe.datetime.str_to_user(data[i].date) %}</b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="right_center_align margin_left_right"><b>{%= data[i].devise %}</b></small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="right_center_align margin_left_right"><b>{%= data[i].solde %}</b></small>
            </div>
        {% } else if (data[i].line == 'f') { %}
            <div class="col-sm-3 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="left_center_align margin_left_right"><b></b></small>
            </div>
            <div class="col-sm-5 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="mid_center_align margin_left_right"><b>solde au {%= frappe.datetime.str_to_user(data[i].date) %}</b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                <small class="right_center_align margin_left_right"><b></b></small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="right_center_align margin_left_right">{%= data[i].recette %}</small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="right_center_align margin_left_right">{%= data[i].depense %}</small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left align-items-center justify-content-center text-center align-middle">
                <small class="right_center_align margin_left_right"><b>{%= data[i].solde %}</b></small>
            </div>
        {% } else { %}
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class=" margin_left_right">{%= frappe.datetime.str_to_user(data[i].date) %}</small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="margin_left_right">{%= data[i].name %}</small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="margin_left_right">{%= data[i].remettant %}</small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="margin_left_right">{%= data[i].reference %}</small>
            </div>
            <div class="col-sm-2 nopadding minh-30 d-inline-block d-flex border-left overflow"> 
                <small class="margin_left_right">{%= data[i].designation %}</small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="rigth_top_align margin_left_right">{%= data[i].recette %}</small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="rigth_top_align margin_left_right">{%= data[i].depense %}</small>
            </div>
            <div class="col-sm-1 nopadding minh-30 d-inline-block d-flex border-left overflow">
                <small class="rigth_top_align margin_left_right">{{ data[i].solde }}</small>
            </div>
        {% } %}
    </div>
    {% if(data[i].line == 'f') { %}
            <div class="row-no-margin parent align-items-center signature">
                <div class="col-sm-4 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle">
                    <small class="left_center_align"><b>Visa du Caissier</b></small>
                </div>
                <div class="col-sm-4 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle ">
                    <small class="mid_center_align"><b>Visa du Responsable Budget et Trésorerie</b></small>
                </div>
                <div class="col-sm-4 nopadding minh-30 d-inline-block d-flex align-items-center justify-content-center text-center align-middle ">
                    <small class="right_center_align"><b>Visa du Chef Service</b></small>
                </div>
            </div>
    {% } %}
{% } %}
